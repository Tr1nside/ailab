{% extends "base.html" %}
{% block title %}Profile{% endblock %}
{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
{% endblock %}

{% block content %}
    <div class="profile-container" id="profile-container">
        <div class="profile-card">
          <div class="profile-content">
            <div class="profile-photo-container">
              <div class="profile-media-wrapper" id="profile-media-wrapper">
                <!-- Default image will be shown here -->
                <img
                  src="{{ url_for('static', filename='img/test.img') }}"
                  alt="User profile media"
                  class="profile-photo"
                  id="profile-image"
                />
                <!-- Video element (hidden by default) -->
                <video
                  class="profile-video hidden"
                  id="profile-video"
                  loop
                  muted
                  autoplay
                  playsinline
                  controls
                ></video>
              </div>
              <div class="edit-button-container">
                <button
                  class="edit-button"
                  aria-label="Редактировать профиль"
                  id="edit-profile-btn"
                >
                  Редактировать
                </button>
              </div>
            </div>
            <div class="profile-info">
              <h1 class="profile-name">Христос Исус Сосалович</h1>
              <p class="profile-email">hesus@hristos.com</p>
              <p class="profile-phone">+7 535 353 53 53</p>
              <p class="profile-position" id="user-position">Админ</p>
              <div class="social-links">
                <div class="social-link" id="telegram-container">
                  <span class="social-label">Telegram:</span>
                  <span id="telegram-id">pipisya</span>
                </div>
                <div class="social-link" id="github-container">
                  <span class="social-label">Github:</span>
                  <span id="github-id">hesus</span>
                </div>
                <div class="social-link" id="vk-container">
                  <span class="social-label">Vk:</span>
                  <span id="vk-id">hesus1</span>
                </div>
              </div>
            </div>
            <div class="qr-code-container">
              <img
                src="{{ url_for('static', filename='img/test.img') }}"
                alt="QR code"
                class="qr-code"
              />
              <div class="action-buttons">
                <button class="action-button">Добавить в друзья</button>
                <button class="action-button" id="download-profile">Скачать визитку</button>
              </div>
            </div>
          </div>
        </div>
      
        <div id="edit-modal" class="modal-overlay hidden">
          <div
            role="dialog"
            aria-modal="true"
            aria-labelledby="modal-title"
            class="modal-content"
          >
            <h2 id="modal-title" class="modal-title">Редактирование профиля</h2>
            <form id="profile-form">
              <div class="form-fields">
                <div class="photo-upload-container">
                  <div class="current-photo-preview" id="preview-container">
                    <!-- Default image preview -->
                    <img
                      id="current-photo"
                      src="{{ url_for('static', filename='img/test.img') }}"
                      alt="Current profile media"
                      class="photo-preview"
                    />
                    <!-- Video preview (hidden by default) -->
                    <video
                      id="current-video"
                      class="video-preview hidden"
                      loop
                      muted
                      autoplay
                      playsinline
                    ></video>
                  </div>
                  <div class="photo-upload-controls">
                    <label for="photo-upload" class="photo-upload-label"
                      >Выбрать медиа</label
                    >
                    <input
                      type="file"
                      id="photo-upload"
                      class="photo-upload-input"
                      accept="image/*,video/*,.gif"
                    />
                    <p class="photo-upload-help">
                      Поддерживаются изображения, GIF и видео
                    </p>
                  </div>
                </div>
                <label class="form-label">
                  <span>Имя</span>
                  <input
                    type="text"
                    value="Христос Исус Сосалович"
                    class="form-input"
                    id="input-name"
                  />
                </label>
                <label class="form-label">
                  <span>Email</span>
                  <input
                    type="email"
                    value="hesus@hristos.com"
                    class="form-input"
                    id="input-email"
                  />
                </label>
                <label class="form-label">
                  <span>Телефон</span>
                  <input 
                    type="tel" 
                    class="form-input"
                    id="input-phone"
                    maxlength="16"
                    required
                  >
                </label>
                <label class="form-label">
                  <span>Должность</span>
                  <input
                    type="text"
                    value="Админ"
                    class="form-input"
                    id="input-position"
                  />
                </label>
                <label class="form-label">
                  <span>Telegram</span>
                  <input
                    type="url"
                    value="https://t.me/pipisya"
                    placeholder="https://t.me/your_username"
                    class="form-input"
                    id="input-telegram"
                  />
                </label>
                <label class="form-label">
                  <span>GitHub</span>
                  <input
                    type="url"
                    value="https://github.com/hesus"
                    placeholder="https://github.com/username"
                    class="form-input"
                    id="input-github"
                  />
                </label>
                <label class="form-label">
                  <span>VK</span>
                  <input
                    type="url"
                    value="https://vk.com/hesus1"
                    placeholder="https://vk.com/username"
                    class="form-input"
                    id="input-vk"
                  />
                </label>
                <div class="form-buttons">
                  <button class="button" type="submit">Сохранить</button>
                  <button class="button" type="button" id="cancel-button">
                    Отмена
                  </button>
                  
                  <a href="{{ url_for('main_bp.logout') }}"><button class="button" type="button" id="logout-button">
                    Logout
                  </button></a>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    
    {% endblock %}

    {% block scripts %}
    <script src="{{ url_for('static', filename='js/profile.js') }}"></script>
    {% endblock %}
    